---
title: Core API
description: API reference for @guardrail-sim/core
---

# Core API

Complete API reference for the `@guardrail-sim/core` package.

## evaluate

Evaluate a scenario against a policy.

```typescript
function evaluate(policy: Policy, scenario: Scenario, options?: EvaluateOptions): EvaluationResult;
```

### Parameters

- **policy**: The policy to evaluate against
- **scenario**: The scenario containing discounts and context
- **options**: Optional configuration

### Returns

`EvaluationResult` with the outcome.

### Example

```typescript
import { evaluate } from '@guardrail-sim/core';

const result = evaluate(
  {
    name: 'my-policy',
    constraints: [{ type: 'max_percentage', value: 50 }],
  },
  {
    discounts: [{ type: 'coupon', value: 30 }],
  }
);
```

## evaluateBatch

Evaluate multiple scenarios at once.

```typescript
function evaluateBatch(policy: Policy, scenarios: Scenario[]): EvaluationResult[];
```

## combinePolicies

Merge multiple policies into one.

```typescript
function combinePolicies(policies: Policy[]): Policy;
```

## extendPolicy

Create a child policy from a parent.

```typescript
function extendPolicy(parent: Policy, overrides: Partial<Policy>): Policy;
```

## registerConstraint

Add a custom constraint type.

```typescript
function registerConstraint(type: string, handler: ConstraintHandler): void;

type ConstraintHandler = (constraint: Constraint, context: EvaluationContext) => ConstraintResult;
```

## configure

Set global configuration.

```typescript
function configure(options: ConfigOptions): void;

type ConfigOptions = {
  defaultAction?: 'reject' | 'clamp' | 'warn';
  defaultSeverity?: 'error' | 'warning';
  strictMode?: boolean;
};
```
